---
layout: news_post
title: "YAML の URI エスケープ処理におけるヒープオーバーフローについて (CVE-2014-2525)"
author: "hone and zzak"
translator: "makimoto"
date: 2014-03-29 01:49:25 +0000
lang: en
---

Ruby の URI エスケープ処理にオーバーフロー問題があります。
この脆弱性は CVE 識別番号 [CVE-2014-2525](http://www.ocert.org/advisories/ocert-2014-003.html) に割り当てられています。

## 詳細

タグ付き YAML の中で文字列がパースされる際に、特殊な文字列がヒープオーバーフローを引き起こし、任意のコードを実行させる可能性があります。

例:

{% highlight ruby %}
YAML.load <code_from_unknown_source>
{% endhighlight %}

## 影響を受けるバージョン

Ruby 1.9.3-p0 以上にはデフォルトの YAML パーサとして psych が含まれています。
0.1.5 以下のバージョンの libyaml にリンクされているすべてのバージョンの psych が影響を受けます。

以下の方法で実行時に使用される libyaml のバージョンを確認できます:

{% highlight ruby %}
$ ruby -rpsych -e 'p Psych.libyaml_version'
[0, 1, 5]
{% endhighlight %}

## 解決方法

libyaml をシステムにインストールしているユーザは libyaml を 0.1.6 にアップデートすることが推奨されます。
Ruby を再コンパイルする際にアップデートした新しい libyaml を指定してください:

    ./configure --with-yaml-dir=/path/to/libyaml

システムに libyaml がインストールされていないユーザは、組み込みの libyaml を使用しているので、 libyaml `0.1.6` を提供している psych `2.0.5` にアップデートすることが推奨されます。
